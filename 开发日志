2017-03-19 17:07:20
发现驱动人物状态变化的入口不唯一,导致逻辑写的很多地方有重复,就拿我怎么判断一个小怪死掉了,并且换到死亡状态,现在在所有的state的update方法中有判断
在所有的received方法中有判断是否到了DiedCMd 而且 所有的livingThings的循环中也有判断,saveTask中也有判断.
如果所有的应该在源头就收拢这个控制,也就是说要在主要的循环中控制,但是住循环又分为 客户端循环 服务端循环 ,感觉可以用同一个server 去处理,如果有同一个service 去处理会好一点
mainlivingthingloopService
其次混乱点在于 一部分业务逻辑 再manager里 一部分逻辑在 state 的 update里 这就感觉很混乱.
那要不就规定 所有的state 不用判断用户的死亡或者其他什么的

暂时把方法移到state 和livingThingmanager里面了 但是发现死亡动画 和 移动的速度 怪物的攻击力 还有移动的角度 都不太满意
移动角度已经解决
新增问题 timer定时器 会停止工作
主角会死 但是 客户端的血量永远是满的
少血没有显示
最后一击血量客户端血条没有归零 对方就死了

2017-3-20 08:59:25
被攻击了之后没有移动 快死了没有动画 可能是动画重叠了 先清除看看看

2017-3-22 18:53:26
扔出的东西id之后变得和服务器不一样了 这个需要测查
2017-3-22 18:53:46
掉落的物品应该找个时间同步一遍
2017-3-22 18:56:00
捡取的事件不能不停的发送万一没能捡起来呢
捡取的事件能不能进行同步发送
需要增加一个删除世界物品的事件
saveTask需要增加trycatch 不然就崩掉了
2017-03-22 21:17:36捡去测试
完成最后一击的时候对方没有立刻死
打算显示血槽的数值
修正伤害计算错误
对方玩家的移动闪现化.
2017-3-23 11:54:26
装备位置错误 盔甲 和头盔 大小 位置错误
ComplexEquipProperties设置setinfo的时候handEquip是2
2017-03-25 23:55:12
修正了盔甲显示黑色问题 纹理管理器创建了两次引起
解决盔甲大小不合身问题.
解决头盔前部显示不对问题
让砍变成范围攻击 非选取攻击
发现bug 穿戴斧子的时候有问题
2017-03-26 13:26:42
对component进行归类
2017-03-26 18:59:34
增加无目标攻击 增加砍的动画
2017-03-26 20:05:16
自动寻找近战攻击目标 ,增加砍的实际效果
2017-03-26 21:13:07
增加砍后的击飞效果 其实是往后跳跃的意思 jump命令
2017-03-26 21:14:10
水饺
2017-03-28 21:59:26
被击退的数据没有上传到服务器 导致服务器位置数据不正确
地形数据上传到服务器 客户端改为从服务器端获取地形数据

2017-04-04 22:32:31
感觉所有的物品都要增加3个属性
1个是再手里是什么形状的
2是再身体上是什么形状的
3是再外界是什么形状的

或者是类型属性
物品简单分类 食物 wear weapon block(不能在身上 可以在手上 可以再)
现在的问题 是 怎么把以String类型的name属性来区分block类型的物品 切换成 以enum 类型为区分标准
2017-4-6 12:20:09
修正人物的大小 调整人物在镜头中的位置 调整人物的移动速度
2017-04-07 22:32:07
block 类型物品再世界掉落应该是一个方块结构 在背包栏里显示也是一个伪3d效果
2017-04-08 13:14:02
item 初步修正 究竟是itembean 包含 component 还是component 包含itemBean;
打算虚化component 以前component 是一个盒子
需要有个地方记录下当前是再哪个环境下 身上 还是手上 还是野外 还是放置

2017-04-15 00:26:46
增加了shaderManager 的shadow的config的创建 initProgram 和uniform改造
修改了box.frag 和box.vert 增加了frag深度纹理的传输和计算
2017-04-16 13:16:35
增加shadow
解决光块不现实问题 发现一个重大bug 取shaderuniform的位置的时候 如果取不到的时候是-1 当初使用>0来判断的 导致位置是0的时候就不赋值了
 不应该每次都绘制阴影贴图 而应该再方块有变动后生成1次纹理贴图

